<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>V-CHAT</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="style.css">
  <script src="chat.js" defer></script>
</head>
<body>

<div class="nds">
  <img src="V-CHAT.png" alt="Logo" class="L1">
  <span class="TT">V-CHAT</span>
  <h1 class="set" onclick="toggleSettings()">âš™ï¸</h1>
</div>

<div id="settingsPanel" class="settings-panel">
  <h3>âš™ï¸ Pengaturan</h3>
  
  <p>Ukuran Font:</p>
  <select id="fontSizeSelect" onchange="changeFontSize()">
    <option value="small">Kecil</option>
    <option value="normal" selected>Normal</option>
    <option value="large">Besar</option>
  </select>
  
  <p>Tema:</p>
  <select id="themeSelect" onchange="changeTheme()">
    <option value="dark" selected>Gelap</option>
    <option value="light">Terang</option>
  </select>
  
  <!-- FITUR 1: Notifikasi -->
  <p>ğŸ”” Notifikasi:</p>
  <select id="notificationSelect" onchange="changeNotification()">
    <option value="all">Semua Pesan</option>
    <option value="mentions">Mention Saja</option>
    <option value="off" selected>Mati</option>
  </select>
  
  <!-- FITUR 2: Bahasa -->
  <p>ğŸŒ Bahasa:</p>
  <select id="languageSelect" onchange="changeLanguage()">
    <option value="id" selected>Indonesia</option>
    <option value="en">English</option>
    <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
  </select>
  
  <!-- FITUR 3: Enter untuk Kirim -->
  <p>ğŸ“± Enter untuk Kirim:</p>
  <select id="enterSendSelect" onchange="changeEnterSend()">
    <option value="on" selected>Aktif</option>
    <option value="off">Nonaktif</option>
  </select>
  
  <!-- FITUR 4: Tampilkan Jam -->
  <p>â° Tampilkan Jam:</p>
  <select id="timeDisplaySelect" onchange="changeTimeDisplay()">
    <option value="all">Semua Pesan</option>
    <option value="latest">Pesan Terbaru</option>
    <option value="off" selected>Mati</option>
  </select>
  
  <!-- FITUR 5: Mode Hemat Data -->
  <p>ğŸ“¶ Mode Hemat Data:</p>
  <select id="dataSaverSelect" onchange="changeDataSaver()">
    <option value="off" selected>Mati</option>
    <option value="on">Aktif</option>
  </select>
  
  <br><br>
  
  <!-- TOMBOL TAMBAHAN UNTUK RESET -->
  <button onclick="resetSettings()" class="reset-btn">â†º Reset ke Default</button>
  <br><br>
  <button onclick="toggleSettings()" class="E">tutupâŒ</button>
</div>

<p>Nomor kamu: <b id="myNumber"></b></p>
<p>Nama: <b id="myName"></b></p>
<button onclick="logout()" class="B0">ğŸšª Keluar</button>
<button class="B1" onclick="DN()">Daftar Nomor</button>

<hr>

<div class="add-contact">
  <input id="newContactNumber" placeholder="Masukkan nomor baru..." class="in">
  <button onclick="saveContact()" class="B">Simpan Kontak</button>
</div>

<hr>

<div id="contact-list" class="contact-box">
  <h3>Kontak Saya</h3>
  <div id="myContacts">Belum ada kontak tersimpan</div>
</div>

<hr>

<!-- Tambahan untuk Online/Offline Status (hidden by default) -->
<div id="onlineStatus" style="display: none;">
  <span id="statusIndicator" class="status-dot offline"></span>
  <span id="statusText">Offline</span>
</div>

<div id="chat-window" style="display:none;">
    <div class="chat-header">
      <div class="chat-header-left">
        <p>Chatting dengan: <b id="chattingWith"></b></p>
        <div id="onlineStatus" style="display: inline-flex;">
          <span id="statusIndicator" class="status-dot offline"></span>
          <span id="statusText">Offline</span>
        </div>
      </div>
      <button class="close-chat-btn" onclick="closeChat()">âœ– Tutup Chat</button>
    </div>
    <div id="chat"></div>
    <input id="messageInput" placeholder="Pesan">
    <button onclick="sendMessage()" class="B2">Kirim</button>
</div>

</body>
</html>